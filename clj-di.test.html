<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj-di.test documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj-di 0.5.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-di</span></div></div></li><li class="depth-2 branch"><a href="clj-di.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 current"><a href="clj-di.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-di.test.html#var-with-fresh-dependencies"><div class="inner"><span>with-fresh-dependencies</span></div></a></li><li class="depth-1"><a href="clj-di.test.html#var-with-registered"><div class="inner"><span>with-registered</span></div></a></li><li class="depth-1"><a href="clj-di.test.html#var-with-reset"><div class="inner"><span>with-reset</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">clj-di.test</h2><div class="doc"><div class="markdown"><p>Helpres for tests.</p></div></div><div class="public anchor" id="var-with-fresh-dependencies"><h3>with-fresh-dependencies</h3><h4 class="type">macro</h4><div class="usage"><code>(with-fresh-dependencies &amp; body)</code></div><div class="doc"><div class="markdown"><p>Test helper for running tests without registered dependencies.</p><p>Usage:</p>
<pre><code class="clojure">(with-fresh-dependencies ...)
</code></pre><p>This helper very useful with <code>use-fixtures</code>, for running all tests without registered dependencies use:</p>
<pre><code class="clojure">(use-fixtures :each
  (fn [f] (with-fresh-dependencies (f))))
</code></pre></div></div><div class="src-link"><a href="https://github.com/nvbn/clj-di/tree/master/src/cljx/clj_di/test.cljx#L4">view source</a></div></div><div class="public anchor" id="var-with-registered"><h3>with-registered</h3><h4 class="type">macro</h4><div class="usage"><code>(with-registered key-dep-pairs &amp; body)</code></div><div class="doc"><div class="markdown"><p>Register dependencies, run code block and forget about dependencies.</p><p>Usage:</p>
<pre><code class="clojure">(with-registered [:http http-client
                  :logger logger]
  ...)
</code></pre></div></div><div class="src-link"><a href="https://github.com/nvbn/clj-di/tree/master/src/cljx/clj_di/test.cljx#L58">view source</a></div></div><div class="public anchor" id="var-with-reset"><h3>with-reset</h3><h4 class="type">macro</h4><div class="usage"><code>(with-reset bindings &amp; body)</code></div><div class="doc"><div class="markdown"><p><strong>CLJS only</strong></p><p>binding =&gt; var-symbol temp-value-expr</p><p>Temporarily redefines vars while executing the body. The temp-value-exprs will be evaluated and each resulting value will replace in parallel the root value of its var. After the body is executed, the root values of all the vars will be set back to their old values. Useful for mocking out functions during testing.</p><p>Usage:</p>
<pre><code class="clojure">(with-reset [http/get (fn [url] :test)]
  (is (= (http/get :url) :test)))
</code></pre></div></div><div class="src-link"><a href="https://github.com/nvbn/clj-di/tree/master/src/cljx/clj_di/test.cljx#L26">view source</a></div></div></div></body></html>
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj-di.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj-di 0.3.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-di</span></div></div></li><li class="depth-2 branch current"><a href="clj-di.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="clj-di.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-di.core.html#var-defprotocol*"><div class="inner"><span>defprotocol*</span></div></a></li><li class="depth-1"><a href="clj-di.core.html#var-forget.21"><div class="inner"><span>forget!</span></div></a></li><li class="depth-1"><a href="clj-di.core.html#var-get-dep"><div class="inner"><span>get-dep</span></div></a></li><li class="depth-1"><a href="clj-di.core.html#var-let-deps"><div class="inner"><span>let-deps</span></div></a></li><li class="depth-1"><a href="clj-di.core.html#var-register.21"><div class="inner"><span>register!</span></div></a></li><li class="depth-1"><a href="clj-di.core.html#var-with-registered"><div class="inner"><span>with-registered</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">clj-di.core</h2><div class="doc"><div class="markdown"><p>Functions and macros for using dependency injection.</p></div></div><div class="public anchor" id="var-defprotocol*"><h3>defprotocol*</h3><h4 class="type">macro</h4><div class="usage"><code>(defprotocol* name &amp; body)</code></div><div class="doc"><div class="markdown"><p>Defines protocol and creates proxy methods where protocol implementation received as a dependency.</p><p>For defining dependency you should:</p>
<pre><code class="clojure">(defprotocol* http-client
  (get [_ url request])
  (post [_ url request]))
</code></pre><p>After that you have <code>http-client</code> protocol and <code>get*</code> and <code>post*</code> proxy functions.</p><p>Then you need to implement protocol:</p>
<pre><code class="clojure">(deftype HttpClient
  []
  http-client
  (get [_ url request] (http/get url request))
  (post [_ url request] (http/post url request)))
</code></pre><p>And register dependency:</p>
<pre><code class="clojure">(register! :http-client (HttpClient.))
</code></pre><p>And after that you can use proxy functions, like:</p>
<pre><code class="clojure">(get* &quot;http://nvbn.github.io/&quot; {})
(post* &quot;http://nvbn.github.io/&quot; {:transit-params {:a 1 :b 2}})
</code></pre></div></div><div class="src-link"><a href="https://github.com/nvbn/clj-di/tree/master/src/cljx/clj_di/core.cljx#L114">view source</a></div></div><div class="public anchor" id="var-forget.21"><h3>forget!</h3><div class="usage"><code>(forget! &amp; keys)</code></div><div class="doc"><div class="markdown"><p>Forget about registered dependencies.</p><p>Usage:</p>
<pre><code class="clojure">(forget! :logger :http)
</code></pre></div></div><div class="src-link"><a href="https://github.com/nvbn/clj-di/tree/master/src/cljx/clj_di/core.cljx#L22">view source</a></div></div><div class="public anchor" id="var-get-dep"><h3>get-dep</h3><div class="usage"><code>(get-dep key)</code></div><div class="doc"><div class="markdown"><p>Get dependency by name.</p><p>Usage:</p>
<pre><code class="clojure">(get-dep :http)
</code></pre><p>Dependency should be registered with <a href="clj-di.core.html#var-register.21">register!</a> or <a href="clj-di.core.html#var-with-registered">with-registered</a>.</p></div></div><div class="src-link"><a href="https://github.com/nvbn/clj-di/tree/master/src/cljx/clj_di/core.cljx#L49">view source</a></div></div><div class="public anchor" id="var-let-deps"><h3>let-deps</h3><h4 class="type">macro</h4><div class="usage"><code>(let-deps deps &amp; body)</code></div><div class="doc"><div class="markdown"><p>Bind dependencies in lexical scope of code block.</p><p>Usage:</p>
<pre><code class="clojure">(let-deps [http :http
           logger :logger]
  ...)
</code></pre><p>It will work like:</p>
<pre><code class="clojure">(let [http (get-dep :http)
      logger (get-dep :logger)]
  ...)
</code></pre><p>Dependencies should be registered with <a href="clj-di.core.html#var-register.21">register!</a> or <a href="clj-di.core.html#var-with-registered">with-registered</a>.</p></div></div><div class="src-link"><a href="https://github.com/nvbn/clj-di/tree/master/src/cljx/clj_di/core.cljx#L62">view source</a></div></div><div class="public anchor" id="var-register.21"><h3>register!</h3><div class="usage"><code>(register! &amp; key-dep-pairs)</code></div><div class="doc"><div class="markdown"><p>Register dependecies.</p><p>Usage:</p>
<pre><code class="clojure">(register! :logger logger
           :http http-client)
</code></pre><p>After that you can get dependency with <a href="clj-di.core.html#var-get-dep">get-dep</a> or <a href="clj-di.core.html#var-let-deps">let-deps</a> using dependency name (here - <code>:logger</code> and <code>:http</code>).</p></div></div><div class="src-link"><a href="https://github.com/nvbn/clj-di/tree/master/src/cljx/clj_di/core.cljx#L6">view source</a></div></div><div class="public anchor" id="var-with-registered"><h3>with-registered</h3><h4 class="type">macro</h4><div class="usage"><code>(with-registered key-dep-pairs &amp; body)</code></div><div class="doc"><div class="markdown"><p>Register dependencies, run code block and forget about dependencies.</p><p>Usage:</p>
<pre><code class="clojure">(with-registered [:http http-client
                  :logger logger]
  ...)
</code></pre></div></div><div class="src-link"><a href="https://github.com/nvbn/clj-di/tree/master/src/cljx/clj_di/core.cljx#L34">view source</a></div></div></div></body></html>